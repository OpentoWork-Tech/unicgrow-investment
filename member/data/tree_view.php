<!--<style>
@media (max-width: 768px) {
	.level-table img:not(.main-image) { max-width: 20px; max-height: 20px; }
	.level-table * { font-size: 9px; }
}
.col-lg-2_1 {
	width: 14.2857%;
	float:left;
}
</style>
		  
<style>
.tree-binary { position: relative; }
.tree-binary .tree-row { position: relative; }
.tree-binary .index-1 { position: absolute; z-index: 1; }
.tree-binary .index-2 { position: absolute; z-index: 2; }
.tree-binary .tree-element { text-align: center; }
.tree-binary .tree-line { font-size: 1px; pointer-events: none; }
.tree-binary .tree-line.horz { border: 2px solid #ccc; border-bottom: 0;
	-webkit-border-top-left-radius: 10px;
	-webkit-border-top-right-radius: 10px;
	-moz-border-radius-topleft: 10px;
	-moz-border-radius-topright: 10px;
	border-top-left-radius: 10px;
	border-top-right-radius: 10px;
}
.tree-binary .tree-line.vert { border-left: 2px solid #ccc; }

.tree-binary .tree-team-label { width: 50%; position: absolute; z-index: 3; text-align: center; pointer-events: none; }
.tree-binary .tree-left-team { left: 0; }
.tree-binary .tree-right-team { right: 0; }
  .tree-binary .tree-label {
	background: rgba(255,255,255,.8); 
	border: 1px solid #ccc; 
	line-height: 20px; 
	font-size: 14px; 
	padding: 0px 5px; 
	display: inline-block; 
	margin-top: 2px;
	-webkit-border-radius: 5px;
	-moz-border-radius: 5px;
	border-radius: 5px;
	pointer-events: none;
}

.tree-binary div[role="tooltip"] .list-group { margin: 5px 0; }
.tree-binary div[role="tooltip"] .list-group-item { padding: 4px 10px; font-size: 12px; }
.tree-binary div[role="tooltip"] .tree-value { font-weight: bold; padding-left: 20px; }
</style>
<div class="col-lg-12" >
	<div class="widget-area">
		<a href="https://globalgamearena.net/members.php?page=binarytree" class="btn btn-info">Back to Top</a>
		<a href="javascript:;" class="btn btn-default disabled">Previous Level</a>
		<hr>
		<div class="tree-binary">
		<div class="tree-left-team tree-team-label" style="top: 22.2813px; line-height: 13px; font-size: 13px;">Left Team: </div>
		<div class="tree-right-team tree-team-label" style="top: 22.2813px; line-height: 13px; font-size: 13px;">Right Team:</div>
		<div class="tree-row" style="height: 59.5625px; margin-bottom: 20px;">
			<div class="tree-left-arrow tree-arrow index-2" style="width: 57.5625px; margin-top: 19.1875px; left: 361.375px;"><img src="assets/img/left.gif" width="100%"></div>
			<div class="tree-right-arrow tree-arrow index-2" style="width: 57.5625px; margin-top: 19.1875px; left: 534.063px;"><img src="assets/img/right.gif" width="100%"></div>
			<div class="tree-element index-2 pos-1-1" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 447.719px;" data-original-title="" title="">
				<a href="members.php?page=binarytree&amp;uid=1">
				<img src="assets/img/4.png" width="100%"></a>
				<div style="pointer-events: none; width: 953px; margin-left: -447.719px;"><span class="tree-label">comeonline</span></div>
			</div>
			<div class="tree-line vert index-1" style="height: 12px; left: 476.5px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 476.5px; height: 12px; left: 238.25px; bottom: -22px;"></div>
		</div>
		
		<div class="tree-row" style="height: 59.5625px; margin-bottom: 20px;">
			<div class="tree-element index-2 pos-2-1" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 209.469px;" data-original-title="" title="">
				<a href="members.php?page=binarytree&amp;uid=5">
				<img src="assets/img/4.png" width="100%"></a>
				<div style="pointer-events: none; width: 476.5px; margin-left: -209.469px;"><span class="tree-label">CN36841854</span></div>
			</div>
			<div class="tree-element index-2 pos-2-2" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 685.969px;">
				<a href="members.php?page=manual_signup&amp;bs=comeonline&amp;bp=right">
				<img src="assets/img/available.png" width="100%"></a>
			</div>
			<div class="tree-line vert index-1" style="height: 12px; left: 238.25px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 238.25px; height: 12px; left: 119.125px; bottom: -22px;"></div>
			<div class="tree-line vert index-1" style="height: 12px; left: 714.75px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 238.25px; height: 12px; left: 595.625px; bottom: -22px;"></div>
		</div>
		
		<div class="tree-row" style="height: 59.5625px; margin-bottom: 20px;">
			<div class="tree-element index-2 pos-3-1" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 90.3438px;">
				<a href="members.php?page=manual_signup&amp;bs=CN36841854&amp;bp=left">
				<img src="assets/img/available.png" width="100%"></a>
			</div>
			<div class="tree-element index-2 pos-3-2" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 328.594px;">
			<a href="members.php?page=manual_signup&amp;bs=CN36841854&amp;bp=right">
			<img src="assets/img/available.png" width="100%"></a>
			</div>
			<div class="tree-element index-2 pos-3-3" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 566.844px;">
			<img class="tree-element-image" src="assets/img/open_icon.png" width="100%">
			</div>
			<div class="tree-element index-2 pos-3-4" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 805.094px;">
			<img class="tree-element-image" src="assets/img/open_icon.png" width="100%">
			</div>
			<div class="tree-line vert index-1" style="height: 12px; left: 119.125px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 119.125px; height: 12px; left: 59.5625px; bottom: -22px;"></div>
			<div class="tree-line vert index-1" style="height: 12px; left: 357.375px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 119.125px; height: 12px; left: 297.813px; bottom: -22px;"></div>
			<div class="tree-line vert index-1" style="height: 12px; left: 595.625px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 119.125px; height: 12px; left: 536.063px; bottom: -22px;"></div>
			<div class="tree-line vert index-1" style="height: 12px; left: 833.875px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 119.125px; height: 12px; left: 774.313px; bottom: -22px;"></div>
		</div>
			
		<div class="tree-row" style="height: 59.5625px; margin-bottom: 20px;">
			<div class="tree-element index-2 pos-4-1" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 30.7813px;">
				<img class="tree-element-image" src="assets/img/open_icon.png" width="100%">
			</div>
			<div class="tree-element index-2 pos-4-2" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 149.906px;">
				<img class="tree-element-image" src="assets/img/open_icon.png" width="100%">
			</div>
			<div class="tree-element index-2 pos-4-3" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 269.031px;">
				<img class="tree-element-image" src="assets/img/open_icon.png" width="100%">
			</div>
			<div class="tree-element index-2 pos-4-4" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 388.156px;">
				<img class="tree-element-image" src="assets/img/open_icon.png" width="100%">
			</div>
			<div class="tree-element index-2 pos-4-5" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 507.281px;">
				<img class="tree-element-image" src="assets/img/open_icon.png" width="100%">
			</div>
			<div class="tree-element index-2 pos-4-6" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 626.406px;">
				<img class="tree-element-image" src="assets/img/open_icon.png" width="100%">
			</div>
			<div class="tree-element index-2 pos-4-7" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 745.531px;">
				<img class="tree-element-image" src="assets/img/open_icon.png" width="100%">
			</div>
			<div class="tree-element index-2 pos-4-8" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 864.656px;">
				<img class="tree-element-image" src="assets/img/open_icon.png" width="100%">
			</div>
			<div class="tree-line vert index-1" style="height: 12px; left: 59.5625px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 59.5625px; height: 12px; left: 29.7813px; bottom: -22px;"></div>
			<div class="tree-line vert index-1" style="height: 12px; left: 178.688px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 59.5625px; height: 12px; left: 148.906px; bottom: -22px;"></div>
			<div class="tree-line vert index-1" style="height: 12px; left: 297.813px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 59.5625px; height: 12px; left: 268.031px; bottom: -22px;"></div>
			<div class="tree-line vert index-1" style="height: 12px; left: 416.938px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 59.5625px; height: 12px; left: 387.156px; bottom: -22px;"></div>
			<div class="tree-line vert index-1" style="height: 12px; left: 536.063px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 59.5625px; height: 12px; left: 506.281px; bottom: -22px;"></div>
			<div class="tree-line vert index-1" style="height: 12px; left: 655.188px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 59.5625px; height: 12px; left: 625.406px; bottom: -22px;"></div>
			<div class="tree-line vert index-1" style="height: 12px; left: 774.313px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 59.5625px; height: 12px; left: 744.531px; bottom: -22px;"></div>
			<div class="tree-line vert index-1" style="height: 12px; left: 893.438px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 59.5625px; height: 12px; left: 863.656px; bottom: -22px;"></div>
		</div>
		
		<div class="tree-row" style="height: 59.5625px;">
			<div class="tree-element index-2 pos-5-1" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 1px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-2" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 60.5625px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-3" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 120.125px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-4" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 179.688px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-5" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 239.25px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-6" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 298.813px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-7" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 358.375px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-8" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 417.938px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-9" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 477.5px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-10" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 537.063px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-11" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 596.625px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-12" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 656.188px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-13" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 715.75px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-14" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 775.313px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-15" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 834.875px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-5-16" style="width: 57.5625px; height: 57.5625px; top: 1px; left: 894.438px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-line vert index-1" style="height: 12px; left: 29.5625px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 59.5625px; height: 12px; left: 0.7813px; bottom: -22px;"></div>
			<div class="tree-line vert index-1" style="height: 12px; left: 87.5625px; bottom: -10px;"></div>
			<div class="tree-line horz index-1" style="width: 59.5625px; height: 12px; left: 60.7813px; bottom: -22px;"></div>
			
		</div>
		
		<div class="tree-row" style="height: 59.5625px;">
			<div class="tree-element index-2 pos-6-1" style="width: 20.5625px; height: 57.5625px; top: 20px; left: -30px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-6-1" style="width: 20.5625px; height: 57.5625px; top: 20px; left: 30px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			<div class="tree-element index-2 pos-6-1" style="width: 20.5625px; height: 57.5625px; top: 20px; left: 90px;"><img class="tree-element-image" src="assets/img/open_icon.png" width="100%"></div>
			
			
			
			
		</div>
	</div>
		
		<div class="row">&nbsp;</div>
		<div class="row">&nbsp;</div>
		<div class="row">
			<div class="col-sm-6">
				<div style="padding-bottom: 10px;">
					<a href="index.php?page=binarytree&amp;uid=17842" class="btn btn-block btn-info">Bottom Left</a>
				</div>
				<ul class="list-group">
					<li class="list-group-item">Left Team
						<span class="pull-right">1 Members</span>
					</li>
				</ul>
			</div>
			<div class="col-sm-6">
				<div style="padding-bottom: 10px;">
					<a href="index.php?page=binarytree&amp;uid=6548" class="btn btn-block btn-info">Bottom Right</a>
				</div>
				<ul class="list-group">
					<li class="list-group-item">Right Team
						<span class="pull-right">3 Members</span>
					</li>
				</ul>
			</div>
		</div>
	</div>
</div>-->
<?php
include('../security_web_validation.php');
?>
<?php
include("condition.php");
include("function/binary_layout/display.php");
include("function/total_child_count.php");

$login_id = $_SESSION['mlmproject_user_id'];

$user_bin = get_user_pair_point_is_or_not($login_id);

switch($user_bin){
	case 0 : $message = "
		<div class='alert alert-warning'>
			<button class='close' data-dismiss='alert' type='button'>
				<span aria-hidden='true'>&times;</span>
				<span class='sr-only'>Close</span>
			</button>
			<h4>Your First Binary Pair is not completed !!</h4>
		</div>"; break;
	case 1 : $message = "
		<div class='alert alert-info'>
			<button class='close' data-dismiss='alert' type='button'>
				<span aria-hidden='true'>&times;</span>
				<span class='sr-only'>Close</span>
			</button>
			<h4>Your are eligible to get Binary Bonus  !!</h4>
		</div>"; break;
}
?>

<div class="col-md-12"><?php //$message?></div>

<div class="col-md-12">
<form name="myform" action="index.php?page=tree_view" method="post">
<table class="table table-bordered">
	<tr>
		<th class="text-right" width="60%">User Name</th>
		<td class="text-right"><input type="text" name="username" class="form-control input-mobile" /></td>		
		<td class="text-right"><input type="submit" value="Search" name="Search" class="btn btn-default" /></td>
	</tr>
</table>
</form>
</div>
 <style>
 @media screen and (max-width: 764px) {
.input-mobile{width:auto;}
}
 </style>
<?php

if(isset($_POST['Search']))
{
	$username = $_REQUEST['username'];
	$qu = query_execute_sqli("select * from users where username = '$username'");
	$num = mysqli_num_rows($qu);
	if($num > 0)
	{
		while($row = mysqli_fetch_array($qu))
		{
			if(get_downline_network_new($login_id,$row['id_user'])){
				$id = $row['id_user'];
			}
			else{
				$id = $login_id;
				echo "<B class='text-danger'>$username isn't in your downline  !</B>"; 
			}
		}
	}	
	else
	{
		echo "<B class='text-danger'>In-Correct User Id !</B>"; 
		$id = $login_id; 
	}	

}
else
{
	$u_id = $_REQUEST['id'];
	if($u_id == 0) $u_id = '';
	if($u_id == '') 
	{ 
		$id = $_SESSION['mlmproject_user_id'];
	}  
	else {$id = $u_id; }
}	

$c = 1;
$j = 1;
$pos[0] = $id;
$sql = "SELECT t1.*,t2.username s_username,CONCAT(t2.f_name,' ',t2.l_name) name,t3.user_id 
		FROM users t1
		left join users t2 on t1.real_parent = t2.id_user
		left join reg_fees_structure t3 on t3.user_id = t1.id_user
 		WHERE t1.id_user = '$id'
		group by t3.user_id ";
$id_query = query_execute_sqli($sql);
$date= array();
while($id_row = mysqli_fetch_array($id_query))
{
	$type = $id_row['type'];
	$position[0] = get_mem_pos($id_row['position']);
	$mode[0] = get_mode($type);
	$date[0] = $id_row['date'];
	$gender[0] = $id_row['gender'];
	$img[0] = get_img($id_row['user_id'],$type,$systems_date);
	$user_name[0] = $id_row['username'];
	$name[0] = ucwords($id_row['f_name']." ".$id_row['l_name']);
	$total_child[0] = give_total_children($id);
	$parent_u_name[0] = $id_row['s_username'];	
	$parent_full_name[0] = $id_row['name'];
}
for($i = 0; $i <7; $i++){
	if($pos[$i] == 0){
		$pos[$j] = 0;
		$left_child[$j] = 0;
		$right_child[$j] = 0;
		$j++;
		$pos[$j] = 0;
		$left_child[$j] = 0;
		$right_child[$j] = 0;
		$j++;
	}
	else{
		$n_id = $pos[$i];
		for($ps = 0; $ps < 2; $ps++){
			$sql = "SELECT t1.*,t2.username s_username,CONCAT(t2.f_name,' ',t2.l_name) name,t3.user_id 
					FROM users t1
					left join users t2 on t1.real_parent = t2.id_user
					left join reg_fees_structure t3 on t3.user_id = t1.id_user
					WHERE t1.parent_id = '$n_id' and t1.position = '$ps'
					group by t3.user_id ";
			$query = query_execute_sqli($sql);
			while($row = mysqli_fetch_array($query))
			{
				$pos[$j] = $row['id_user'];
				$type = $row['type'];
				$mode[$j] = get_mode($type);
				$position[$j] = get_mem_pos($row['position']);
				$user_name[$j] = $row['username'];
				$parent_u_name[$j] = $row['s_username'];
				$parent_full_name[$j] = $row['name'];
				$name[$j] = ucwords($row['f_name']." ".$row['l_name']);
				$date[$j] = $row['date']; 
				$gender[$j] = $row['gender'];
				$total_child[$j] = give_total_children($pos[$j]);
				$img[$j] = get_img($row['user_id'],$type,$systems_date);
				
				$j++;
			}
			$num = mysqli_num_rows($query);
			if($num == 0)  
			{
				$pos[$j] = 0; 
				$left_child[$j] = 0;
				$right_child[$j] = 0;
				$j++; 
			} 
		}					 
	}
	
}

$c = count($new_reg);
for($i = 0; $i < $c; $i++) {
	print $new_reg[$i][0].$new_reg[$i][1]; print "<br>"; }
$page = "index.php?val=tree_view";

display($pos,$page,$img,$user_name,$name,$parent_u_name,$parent_full_name,$mode,$position,$date,$gender,$_SESSION['mlmproject_user_username'],$total_child,false);	

function get_img($id,$type,$date)	
{
	$num = 0;
	if($id != "")$num = 1;
	if($type == 'B' and $num != 0) { $imges = "p"; }
	if($type == 'B' and $num == 0) { $imges = "f"; }
	if($type == 'C') { $imges = "b"; }
	if($type == 'D') { $imges = "b"; }
	return $imges;
}
function get_mem_pos($position){
	if($position == 0) { $pos = "Left"; }
	else { $pos = "Right";  }
	return $pos;	
}
function get_mode($type)
{
	if($type == 'A') { $mode = "Deactivate";  }
	if($type == 'B') { $mode = "Activate";  }
	if($type == 'B') { $mode = "Blocked";  }
	return $mode;
}

function get_username($parent)
{
	$query = query_execute_sqli("select * from users where	id_user = $parent ");
	while($row = mysqli_fetch_array($query))
	{
		$username = $row['username'];
		return $username;	
	}
}


	
/*	$mode[$j] = '';
$position[$j] = 0;
$user_name[$j] = '';
$parent_u_name[$j] = '';
$parent_full_name[$j] = '';
$type = '';
$date[$j] = ''; 
$gender[$j] = 
$all_child = 0;
$left_child[$j] = 0;
$right_child[$j] = 0;
$name[$j] = ''; 
$img[$j] = '';*/
			
?>			